datasource db {
  provider = "postgresql" // o "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Estudiante {
  id_estudiante  Int           @id @default(autoincrement())
  nombre         String        @db.VarChar(100)
  apellido       String        @db.VarChar(100)
  dni            String        @db.VarChar(20)
  correo         String        @db.VarChar(100)
  telefono       String?       @db.VarChar(20)
  inscripciones  Inscripcion[]

  @@map("Estudiante")
}

model Profesor {
  id_profesor      Int              @id @default(autoincrement())
  nombre           String           @db.VarChar(100)
  apellido         String           @db.VarChar(100)
  correo           String           @db.VarChar(100)
  telefono         String?          @db.VarChar(20)
  titulos          Titulo[]
  profesorMaterias ProfesorMateria[]

  @@map("Profesor")
}

model Titulo {
  id_titulo      Int      @id @default(autoincrement())
  id_profesor    Int
  nombre_titulo  String   @db.VarChar(150)
  institucion    String   @db.VarChar(150)
  ano_obtencion Int
  profesor       Profesor @relation(fields: [id_profesor], references: [id_profesor])

  @@map("Titulo")
}

model Carrera {
  id_carrera      Int       @id @default(autoincrement())
  nombre_carrera  String    @db.VarChar(150)
  duracion_anos  Int
  materias        Materia[]

  @@map("Carrera")
}

model Aula {
  id_aula      Int       @id @default(autoincrement())
  nombre_aula  String    @db.VarChar(50)
  capacidad    Int
  ubicacion    String?   @db.VarChar(100)
  materias     Materia[]

  @@map("Aula")
}

model Materia {
  id_materia        Int               @id @default(autoincrement())
  nombre_materia    String            @db.VarChar(150)
  id_carrera        Int
  id_aula           Int
  carrera           Carrera           @relation(fields: [id_carrera], references: [id_carrera])
  aula              Aula              @relation(fields: [id_aula], references: [id_aula])
  inscripciones     Inscripcion[]
  profesorMaterias  ProfesorMateria[]

  @@map("Materia")
}

model ProfesorMateria {
  id_profesor_materia Int      @id @default(autoincrement())
  id_profesor         Int
  id_materia          Int
  profesor            Profesor @relation(fields: [id_profesor], references: [id_profesor])
  materia             Materia  @relation(fields: [id_materia], references: [id_materia])

  @@map("ProfesorMateria")
}

model Inscripcion {
  id_inscripcion    Int        @id @default(autoincrement())
  id_estudiante     Int
  id_materia        Int
  fecha_inscripcion DateTime   @db.Date
  estudiante        Estudiante @relation(fields: [id_estudiante], references: [id_estudiante])
  materia           Materia    @relation(fields: [id_materia], references: [id_materia])

  @@map("Inscripcion")
}
